<h2>Panels with Panelists</h2>

<% form_tag('/planner_reports/panels_with_panelists', :method => 'post') do %>
<p>
   <%= label_tag :mod_date, "Modified since (YYYY-MM-DD): "%>
   <%= text_field_tag :mod_date %><br /><br />
   <%= label_tag :sort_by, "Sort By: "%>
   <%= select_tag :sort_by, options_for_select([['Date / Time', 'time'], ['Room', 'room'], ['Item Name', 'name']], params[:sort_by]) %><br /><br />
   <%= submit_tag "Export CSV", :name=>"csv" %>
   <%= submit_tag "View in Browser", :name => "html" %>
</p>
<% end %>
<p>
<% if params[:html] %>
   <% if @panels.blank? %>
      No one right now.
   <% else %>
      <dl>
      <% @panels.each do |p| %>
          <dt><h3><%= p.title %> (<%= p.format.name unless p.format.nil? %>)<%= ", #{p.time_slot.start.strftime('%a %H:%M')} - #{p.time_slot.end.strftime('%a %H:%M')}" unless p.time_slot.nil? %><%= ", #{p.room.name} (#{Venue.find(p.room.venue_id).name})" unless p.room.nil? %></h3> </dt>
          <% unless p[:names].blank? %>
             <dd>Panelists:
                 <ul><% p[:names].each do |n| %>
                        <li><%= n %></li>
                     <% end %>
                 </ul>
             </dd>
          <% end %>
          <% unless p[:rsvd].blank? %>
             <dd>Reserved:
                 <ul><% p[:rsvd].each do |n| %>
                        <li><%= n %></li>
                     <% end %>
                 </ul>
             </dd>
          <% end %>
      <% end %>
      </dl>
   <% end %>
   
   </p>
<% end %>
