<script type="text/javascript">
VenueApp = new Backbone.Marionette.Application();

//
VenueApp.VenueManagement = (function(Backbone){
    
    //
    Venue = Backbone.Model.extend({
        // TODO - add a room
    });
    
    VenueCollection = Backbone.PageableCollection.extend({
        model: Venue,
        url: '/venue/list.json',
    });
    
    var columns = [{
        name: "",
        cell: "select-row",
        // headerCell: "select-all",
    } , {
        name : 'name',
        label : 'Venue',
        editable : false,
        cell: 'string'
    }];
    
    //
    VenueView = Marionette.ItemView.extend({
        initialize : function() {
            // Create grid and attach it to the view ...
            this.venueGrid = new Backgrid.Grid({
               columns: columns,
               collection: this.model 
            });

            $('#venue-grid').append(this.venueGrid.render().$el);
            
            this.listenTo(this.model, "backgrid:selected", this.rowSelected);
            
            this.model.fetch(); //{ reset : true });
        },
        
        rowSelected : function(mdl, checked) { // the model that is selected, boolean to indicate if checked
            if (checked) {
                // unselect the other element(s)
                if (this.selected) {
                    this.selected.trigger("backgrid:select", this.selected, false);
                }
                this.selected = mdl;
                // TODO - load the room information in a table
            }
        }
    });
    
    
    //
    return {
        
        init : function() {

            var venueView = new VenueView({
                model : new VenueCollection(),
            });
            
        }
        
    };
    
})(Backbone);

//
jQuery(document).ready(function() {
    VenueApp.start();
    VenueApp.VenueManagement.init();
});


</script>
