<script type="text/javascript">

jQuery(document).ready(function() {
    jQuery("#<%= @place %>").participantTable({
        caption : '<%= t @caption %>',
        selectNotifyMethod : <%= @selectNotifyMethod %>,
        clearNotifyMethod : <%= @clearNotifyMethod %>,
        loadNotifyMethod : <%= @loadNotifyMethod %>,
        root_url : "<%= @root_url %>",
        baseUrl : "<%= @baseUrl %>",
        getGridData : "<%= @getGridData %>",
        
        delayed : <%= @delayed %>,

        name : [true, '<%= t "name"%>'],       
        invite_status : [<%= @invite_status%>, '<%= t "invitation-status"%>' ],
        invite_category : [<%= @invite_category%>, '<%= t "invitation-category-abbreviated"%>' ],
        acceptance_status : [<%= @acceptance_status%>, '<%= t "acceptance"%>'],
        has_survey : [<%= @has_survey%>, '<%= t "survey"%>'],

        mailings : [<%= @includeMailings%>, '<%= t "mailings"%>' ],
        mail_history : [<%= @includeMailHistory%>, '<%= t "mail-history"%>' ],
        
        view : <%= @view %>,
        search : <%= @search %>,
        del : <%= @del %>,
        edit : <%= @edit %>,
        add : <%= @add %>,
        
        refresh : <%= @refresh %>,
        controlDiv : "<%= @controlDiv %>",
        pager : "#<%= @pager %>",
        
        multiselect : <%= @multiselect %>,
        
        extraClause : "<%= @extraClause %>",
        includeMailings : <%= @includeMailings %>,
        includeMailHistory : <%= @includeMailHistory %>,
        
        onlySurveyRespondents : <%= @onlySurveyRespondents %>,
        
        sortname : 'people.last_name',
        
        modelType : <%= @modelType %>,
        modelTemplate : "<%= @modelTemplate %>",
        showControls : <%= @showControls %>,
        
        modal_create_title : '<%= t "create-participant" %>',
        modal_edit_title : '<%= t "edit-participant" %>',

        confirm_content     : '<%= t "delete-selected-data" %>',
        confirm_title       : '<%= t "delete-confirmation" %>'
        

    });
    
    $('#collapseButton').click(function(ev) {
        $('#right-panel-action-group').attr('class','col-fixed-small'); 
        $('#right-bar-action-group').css('display','none'); 
        $('#participant-detail-div').attr('class','col-md-12 col-right-offset-small left-jqgrid'); 
        $('#participants').participantTable('resize_grid'); 
        $('#expandButton').css('display','block');
        $('#collapseButton').css('display','none');
        $('#participant-tabs').tabdrop('layout');  
              
    });
    
    $('#expandButton').click(function(ev) {
        $('#right-panel-action-group').attr('class','col-md-3 col-fixed-large hidden-sm hidden-xs'); 
        $('#right-bar-action-group').css('display','block'); 
        $('#participant-detail-div').attr('class','col-md-9 left-jqgrid'); 
        $('#participants').participantTable('resize_grid'); 
        $('#expandButton').css('display','none');
        $('#collapseButton').css('display','block');        
        $('#participant-tabs').tabdrop('layout');
    });
});

    function resizeSideBar () {
        var bottomBarHeight = $('#grenadine-footer').height();
        var logoBarHeight = $('#logo-bar').height();
        var menuBarHeight = $('#app-menu-div').height();
        var browserViewport = $( window ).height();
        var menuSeparatorDIV = $('#menu-separator-div').height();
        var desiredHeight = browserViewport - logoBarHeight - menuBarHeight - bottomBarHeight;
        $("#right-panel-action-group").css('height',desiredHeight);
    };
    
    $( window ).resize(function() {
        resizeSideBar();
    });
    
    var translations = {
        participant_status_not_set: '<%= t ('participant-status-not-set') %>',
        participant_acceptance_status: '<%= t ('participant-acceptance-status') %>',
        participant_email_more: '<%= t ('participant-email-more') %>',
        invitation_accepted: '<%= t ('invitation-accepted') %>',
        invitation_declined: '<%= t ('invitation-declined') %>',
        invitation_probable: '<%= t ('invitation-probable') %>'
    };

</script>
